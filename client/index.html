<head>
  <title>Status Board</title>
</head>

<template name="header">
  <nav class="navbar navbar-default">
    <div class="container-fluid" style="padding-left:0; padding-right:0">
      <div class="collapse navbar-collapse" style="padding-left:0; padding-right:0">
        <ul class="nav navbar-nav">
          {{#each groups}}
            <li class="{{groupActive}}"><a class="toggleGroup" href="#">{{group}}</a></li>
          {{/each}}
        </ul>

        <ul class="nav navbar-nav navbar-right">
          <li class="{{activeWhenShowAsTiles}}"><a id="showAsTiles" href="#"><span class="glyphicon glyphicon-th" aria-hidden="true"></span></a></li>
          <li class="{{activeWhenShowAsTable}}"><a id="showAsTable" href="#"><span class="glyphicon glyphicon-th-list" aria-hidden="true"></span></a></li>
        </ul>
      </div>


    </div>
  </nav>
</template>

<template name="index">
    {{#if isDefaultMode}}
      {{> header }}
    {{/if}}
    {{#if showAsTiles}}
      {{> tiles}}
    {{else}}
      {{> table .}}
    {{/if}}
</template>

<template name="tiles">
  {{#each groups}}
    <h3 class="group-name">{{group}}</h3>
    {{#each services}}
    <div class="dash-tiles ">
        <div class="dash-tile {{statusClass}} clearfix">
            <div class="dash-tile-header">
              {{name}}
              <a style="float:right" href="{{pathFor route=editRoute id=_id}}" class="editServiceAction"><i class="fa fa-edit"></i></a>
            </div>
            <!--div class="dash-tile-icon"><i class="fa fa-users"></i></div-->
            {{!--
            <div class="dash-tile-timestamp">checked: {{lastCheckHuman}}</div>
            --}}
            <div class="dash-tile-text">
                {{statusText}}
            </div>
            <div class="dash-tile-status">
                {{> simpleServiceStatusGraph }}
            </div>
        </div>
    </div>
    {{/each}}
    <div style="clear:left;"></div>
  {{/each}}
</template>

<template name="table">
  <table class="table table-hover">
  {{#each groups}}
    <thead>
      <tr>
        <th colspan="2" style="font-size:150%">{{group}}</th>
        <th>Last checked</th>
        <th colspan="2"></th>
      </tr>
    </thead>
    <tbody>
    {{#each services}}
      <tr class="{{statusClass}}">
        <td style="width:50px; text-align:center;">
          <span class="glyphicon glyphicon-{{statusGlyphicon}}" style="color:{{statusGlyphColor}}" aria-hidden="true"></span>
        </td>
        <td>
          {{name}}
        </td>
        <td>
          {{lastCheckHuman}}
        </td>
        <td>
          {{> simpleServiceStatusGraph }}
        </td>
        <td>
          <a style="float:right" href="{{pathFor route=editRoute id=_id}}" class="editServiceAction"><i class="fa fa-edit"></i></a>
        </td>
      </tr>
    {{/each}}
    </tbody>
  {{/each}}
  </table>
</template>

<template name="simpleServiceStatusGraph">
    {{#each serviceStatus}}
        <div class="statusPart" style="background-color:{{statusColor}};border-bottom:2px solid {{borderStatusColor}};border-top:2px solid {{borderStatusColor}};" data-tooltip="{{dateFromNow}}" data-tooltip-direction="s"></div>
    {{/each}}
</template>
